{
  "$schema": "https://raw.githubusercontent.com/CodeFromAnywhere/ActionSchema/main/schemas/action-schema.schema.json",
  "type": "object",
  "description": "Agent User contains one row per user. The store cannot be seen by admins and contains all secrets for all oauth apps and regular Authorizations, the user has logged into.",
  "$comment": "Maybe it'd be better to keep a separate store of users per admin to allow them to see login statistics and keep separation of data. However, for now let's KISS. Another option would be to merge agent-user and agent-admin as it can be one person too.",
  "properties": {
    "keys": {
      "description": "List of access tokens the user has authenticated for",
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "openapiUrl": {
            "type": "string",
            "description": "Useful for quick access"
          },
          "service": {
            "type": "string",
            "description": "slug representation for the API"
          },
          "access_token": {
            "type": "string",
            "description": "The access token string as issued by the authorization server."
          },
          "token_type": {
            "type": "string",
            "description": "The type of token this is, typically just the string 'Bearer'."
          },
          "expires_in": {
            "type": "integer",
            "description": "The lifetime in seconds of the access token.",
            "minimum": 1
          },
          "refresh_token": {
            "type": "string",
            "description": "The refresh token, which can be used to obtain new access tokens using the same authorization grant."
          },
          "scope": {
            "type": "string",
            "description": "A space-separated list of scopes that the access token is valid for."
          }
        },
        "required": ["access_token", "token_type", "expires_in"],
        "additionalProperties": false
      }
    },
    "threadIds": {
      "type": "array",
      "items": { "type": "string" },
      "description": "List of threads available, newest last"
    }
  }
}
