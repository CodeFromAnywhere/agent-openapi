# May 2024

- ✅ Setup boilerplate
- ✅ Fix routing issues
- ✅ Implement refresh propagation to localStorage
- ✅ change pattern data.actionschema to allow for `-_~.AZ`
- ✅ make AgentOpenapi item and create crud-openapi at https://data.actionschema.com/agent-openapi/openapi.json
- ✅ create npm script that turns openapi into an SDK client
- ✅ ensure `databaseId` goes lowercase upon creation
- ✅ Fix bug so the script `npm run crud` actually works
- ✅ Implement refresh storage
- ✅ Implement OpenAPI

# June 2024

- ✅ Implement simple `agent.actionschema.com/asst_xxxx/message` with `openai` SDK
- ✅ Expose `agent.actionschema.com/asst_xxxx/agent.json` with instructions & tools taken from openai's API.
- 🤔 Revelation: `Asssistant` doesn't contain any information about the API URL, paths, or Authentication. This makes this whole idea problematic as tools cannot be accessed without external implementation. Therefore, instead, we could build `agent.actionschema.com/[agentSlug]/message` and `agent.json` and `openapi.json` but not with login to openai.

## Refactor Agents, Week of June 3rd

✅ Instead of `refreshOpenai`, let's create agents via a form in which you provide an `openapiUrl` and then you can manage further configuration. Ensure default instructions and other settings are generated by default.

✅ Instead, store this for OpenAIAgent: `{ agentSlug, openaiSecretKey, deepgramToken, authToken, name, instructions, model, top_p, temperature, openapiAuth, openapiUrl, functionsCalculated }`

✅ Rename `details.json` to `GET details` and ensure it provides all details including `openapiAuth` only if `Authorization` header is set to match authToken.

✅ Refactor `/message` to not use an assistant

✅ To support functions, it needs to call the OpenAPI based on something returned as step. https://platform.openai.com/docs/assistants/tools/function-calling/quickstart

✅ Ensure authToken gets added automatically for new agents

✅ Confirm an agent with people-openapi tool works.

✅ Ensure `message` can also handle images by url

❌ Chat Completions doesn't support other files, so let's leave it at this for now. We could add logic we had in whatsapp-twilio stuff to also handle other types of files, but it's probably better to leave this and have a broader set of models that we support without increasing somplexity.

✅ Ensure `message` response can also handle more than just text

## Fixes June 7th

- ✅ Fix openapi

  - ✅ remove `deepgramToken` from openapi for making an agent.
  - ✅ also change order: required first!
  - ✅ model should have some options only

- ✅ Fix `<OpenapiForms>`

  - ✅ `/message` input should be a textarea
  - ✅ make a button to generate a twilio url: `prompt(deepgramToken)`
  - ✅ make the textareas a bit bigger

- ✅ Allow updating an agent: link "Update" to prefil form with existing agent

- ✅ When seeing an agent on /[agentSlug], add twilio-phone-callback and twilio-message-callback URLs so its easy to setup

- Fix when using openapi tools

  - url is incorrect (debug this)
  - test `/message` and confirm it works
  - After tools work in message, test if the tool works in deepgram as well

After this all works well, test with Bruna/Milan/Rutger

Now integrate whatsapp.

# LATER

- Support for threads
- Support for streaming via `/streamMessage`
